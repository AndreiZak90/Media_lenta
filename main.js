(()=>{"use strict";(new class{constructor(){this.page=document.body.querySelector("#root")}init(){this.addMainfield(this.page)}addMainfield(e){const t=document.createElement("div");t.classList.add("container");const a=document.createElement("div");a.classList.add("message_field"),t.append(a);const n=document.createElement("div");n.classList.add("search");const s=document.createElement("input");s.classList.add("search_input"),s.type="text",n.append(s);const d=document.createElement("div");d.classList.add("voice_and_video");const o=document.createElement("img");o.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA6UlEQVR4nO2WOwrCQBRFT5VK7dTliLoBP5sRK8VCXY6fFZhChCAuwmjlB7EURgJXkBAj4iSC5MIr3od74CXMDGR6LwcYAzvAB0aqJa4RYEIR1BLXLgK8TwNsXkQGti6TrZp/+7lWwPIDsKv4WiZk/A5sbQMmA5PSqq8yyin3I6Bb9QrKLzbAG5lVYq7FoXpV5Wsb4IHMJsodwf2Ih8BMs30b4DJwlmEnZq6rmRNQxJLawE3GU6AG5BV1YK5eMNPEslrAMeYAOQANElIJ6AHeE9BTLeilIpPWrfQzsBvzfR/h/gq8SALMX+gOKBWyfJizyGUAAAAASUVORK5CYII=",o.classList.add("img_voice");const c=document.createElement("img");c.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA5UlEQVR4nO2UQQ7BQBSGv5WtC7DuJRxAI86llo5BJO7ABbiCGitEu5cKeU2aZjoYHSXmT/7NvMn72jf/DHh9ubrAHEjFCyD4BPQIZCWfpGalFjAG9oACIlkraq6B5p7ZgiNNs9taUakBnNiClaaZegF8dgleGMDTOkc9Ku0JJEjlfQegYwtuCVwZwoWkdyZnmsifWkP/TwNgZwjOI8dAaAOO34Dm3lb07gFrYKUrZjW5qDYwAS4VdSfgoUzA9GFOwM9M5C4Pzvyo+ZFwDZu6Tk8/ILHjJ3MDLHXF8E34DdqvAHvRmK5FFX1IzvbPjgAAAABJRU5ErkJggg==",c.classList.add("img_video"),d.append(o),d.append(c),n.append(d),t.append(n),e.append(t),s.addEventListener("keyup",(e=>{"Enter"===e.code&&navigator.geolocation&&navigator.geolocation.getCurrentPosition((e=>{const{latitude:t,longitude:n}=e.coords,d=`[${t}, ${n}]`;this.addTextMassege(a,s.value,d),s.value=""}),(()=>{this.manualInput(this.page,s.value,a),s.value=""}))}))}addTextMassege(e,t,a){const n=document.createElement("div");n.classList.add("text_message");const s=document.createElement("p");s.classList.add("message_time"),s.textContent=this.time();const d=document.createElement("p");d.textContent=t,d.classList.add("message_value_text");const o=document.createElement("value_geolocation");o.textContent=a,n.append(s),n.append(d),n.append(o),e.append(n)}manualInput(e,t,a){const n=document.createElement("div");n.classList.add("modal_Input");const s=document.createElement("h2");s.classList.add("modal_Input_title"),s.textContent="Что-то пошло не так..",n.append(s);const d=document.createElement("p");d.classList.add("modal_Input_text"),d.textContent="К сожалению, нам удалось определить ваше местоположение, пожалуйста дайте разрешение или введите данные в ручную";const o=document.createElement("p");o.classList.add("modal_Input_text"),o.textContent="Широта и долгота через запятую";const c=document.createElement("p");c.classList.add("error_text"),c.textContent="Некоректные данные...",n.append(d),n.append(o),n.append(c);const i=document.createElement("input");i.classList.add("modal_Input_value"),i.type="text",n.append(i);const l=document.createElement("div");l.classList.add("modal_Input_btn");const A=document.createElement("button");A.classList.add("modal_Input_btn_ok"),A.textContent="ок";const p=document.createElement("button");p.classList.add("modal_Input_btn_close"),p.textContent="отмена",l.append(A),l.append(p),n.append(l),e.append(n),A.addEventListener("click",(()=>{if(!1===this.valid(i.value))c.classList.add("error_text_activ"),i.value="";else{const e=this.dopValid(i.value);n.remove(),this.addTextMassege(a,t,e)}}))}time(){const e=new Date,t=e.getFullYear(),a=e.getMonth(),n=e.getDate();return` ${e.getHours()}:${e.getMinutes()} ${n}-${a+1}-${t}`}valid(e){return/^[^a-zA-Z]*,[^a-zA-Z]*$/.test(e)}dopValid(e){let t=e.split(",");return`[${t[0]}, ${t[1]}]`}}).init()})();